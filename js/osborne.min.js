function changeGallery(e){if(!active){active=!0;for(var i=["gallery","detail","thumbnail"],t={},n=0;n<i.length;n++){var a=i[n],s=$("."+a),o=s.filter(".show"),l=s.filter('[data-gallery="'+e+'"]');t[a]={},t[a].current=o,t[a].next=l}(new TimelineLite).to(t.gallery.current,.75,{x:-750,autoAlpha:.25,display:"none"}).to(t.detail.current,.75,{x:-375,autoAlpha:.25,display:"none"},"-=0.75").fromTo(t.gallery.next,.75,{x:750,autoAlpha:.25},{x:0,autoAlpha:1,display:"block"},"-=0.75").fromTo(t.detail.next,.75,{x:375,autoAlpha:.25},{x:0,autoAlpha:1,display:"block"},"-=0.75"),$.each(t,function(e){t[e].next.addClass("show")}),setTimeout(function(){$.each(t,function(e){t[e].current.removeClass("show")}),active=!1},1e3)}}function handleScroll(){scrollTimer=null;$(window).scrollTop()>0?$(".site-branding a").removeClass("full-logo"):$(".site-branding a").addClass("full-logo")}function sectionsWidth(e){var i=$(".sections:not(.steps)");$.each(i,function(){var i=$(this),t=i.find(".section").length,n=$(".wrapper").width();if(t>1){var a=n*t;if(i.width(a),e){var s=i.find(".section.show"),o=-n*($(s[0]).data("index")-1);animations.slide($(s[0]),$(s[0]),i,o)}}})}$(document).ready(function(){handleScroll(),sectionsWidth(),$(".slider-nav").click(function(){slider.button=$(this),slider.prevNext=$(".slider-nav"),slider.container=$(this).siblings(".sections"),slider.animationType="slide",slider.slider()}),$(".thumbnail").click(function(){var e=$(this);if(!e.hasClass("show")){changeGallery(e.data("gallery"))}}),$(".gallery-nav").click(function(){var e=$(".gallery.show");slider.button=$(this),slider.prevNext=$(".gallery-nav"),slider.container=e,slider.sliders=e.find("li"),slider.checkPrevNext=!1,slider.slider()}),$(".header-container .main-link, .home-main").click(function(e){new TimelineLite;var i=$(e.target.hash).offset().top,t=$(".site-header").height();return $("html, body").animate({scrollTop:i-t},1e3),!1}),$(".back-to-top").click(function(e){return $("html, body").animate({scrollTop:0},1e3),!1}),$(".bg-hover").mousemove(function(e){var i=-e.pageX/70,t=-e.pageY/70;TweenMax.to($(this).find(".background"),1,{x:i,y:t})})});var active=!1,scrollTimer=null;$(window).scroll(function(){scrollTimer&&clearTimeout(scrollTimer),scrollTimer=setTimeout(handleScroll,10)});var cachedWidth=$(window).width();$(window).resize(function(){var e=$(window).width();e!==cachedWidth&&(sectionsWidth(!0),cachedWidth=e)});var slider={active:!1,button:$(".prev-next"),container:$(".container"),sliders:".section",prevNext:$(".prev-next"),checkPrevNext:!0,animationType:"fade",hidePrevNext:function(e,i,t){e===i?(t.filter(".next").addClass("hide"),t.filter(".prev").removeClass("hide")):1===e?(t.filter(".next").removeClass("hide"),t.filter(".prev").addClass("hide")):t.removeClass("hide")},slider:function(){if(!this.active){this.active=!0;var e,i=this.container.find(this.sliders),t=i.filter(".show"),n=this.button.hasClass("pagination"),a=parseInt(this.button.data("index")),s=this.button.hasClass("next"),o=parseInt(t.data("index"));$(".pagination-"+o).removeClass("active"),n||((e=s?o+1:o-1)>i.length&&(e=1),e<1&&(e=i.length)),n&&(e=a);var l=i.filter("[data-index="+e+"]");switch(this.animationType){case"fade":animations.fade(t,l);break;case"slide":var r=-(this.container.outerWidth()/i.length)*(e-1);animations.slide(t,l,this.container,r)}this.checkPrevNext&&this.hidePrevNext(e,i.length,this.prevNext);var d=this;setTimeout(function(){t.removeClass("show"),d.active=!1},1e3)}}},animations={duration:.75,timeBetween:"-=0.75",fade:function(e,i){(new TimelineLite).to(e,this.duration,{opacity:0}).to(i,this.duration,{opacity:1,onComplete:function(){i.addClass("show")}},this.timeBetween)},slide:function(e,i,t,n){(new TimelineLite).to(t,this.duration,{x:n}).to(e,this.duration,{opacity:0},this.timeBetween).fromTo(i,this.duration,{opacity:0},{opacity:1},this.timeBetween),i.addClass("show")}};